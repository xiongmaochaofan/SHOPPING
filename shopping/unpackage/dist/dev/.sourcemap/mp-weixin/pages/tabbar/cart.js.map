{"version":3,"sources":["uni-app:///main.js","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/tabbar/cart.vue?c1cc","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/tabbar/cart.vue?03e5","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/tabbar/cart.vue?4e8c","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/tabbar/cart.vue?81ff","uni-app:///pages/tabbar/cart.vue","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/tabbar/cart.vue?40f0","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/tabbar/cart.vue?58da"],"names":["createPage","Page"],"mappings":"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","file":"pages/tabbar/cart.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/tabbar/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=3c3dbdc8&scoped=true&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&id=3c3dbdc8&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c3dbdc8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/tabbar/cart.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=template&id=3c3dbdc8&scoped=true&\"","var components = {\n  uniSwipeAction: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-swipe-action/uni-swipe-action\" */ \"@/components/uni-swipe-action/uni-swipe-action.vue\"\n    )\n  },\n  uniSwipeActionItem: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-swipe-action-item/uni-swipe-action-item\" */ \"@/components/uni-swipe-action-item/uni-swipe-action-item.vue\"\n    )\n  },\n  mixNumberBox: function() {\n    return import(\n      /* webpackChunkName: \"components/mix-number-box/mix-number-box\" */ \"@/components/mix-number-box/mix-number-box.vue\"\n    )\n  },\n  mixEmpty: function() {\n    return import(\n      /* webpackChunkName: \"components/mix-empty/mix-empty\" */ \"@/components/mix-empty/mix-empty.vue\"\n    )\n  },\n  mixLoading: function() {\n    return import(\n      /* webpackChunkName: \"components/mix-loading/mix-loading\" */ \"@/components/mix-loading/mix-loading.vue\"\n    )\n  },\n  mixModal: function() {\n    return import(\n      /* webpackChunkName: \"components/mix-modal/mix-modal\" */ \"@/components/mix-modal/mix-modal.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 =\n    _vm.loaded && (_vm.list.length > 0 || _vm.invalidList.length > 0)\n      ? _vm._f(\"price\")(_vm.totalPrice, 2)\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"app\">\r\n\t\t<mescroll-body\r\n\t\t\tref=\"mescrollRef\" \r\n\t\t\t@init=\"mescrollInit\" \r\n\t\t\t:top=\"0\" \r\n\t\t\t@down=\"downCallback\" \r\n\t\t\t:up=\"upOption\" \r\n\t\t\t@up=\"loadList\" \r\n\t\t>\r\n\t\t\t<!-- 列表 -->\r\n\t\t\t<uni-swipe-action>\r\n\t\t\t\t<uni-swipe-action-item v-for=\"(item, index) in list\" :key=\"item._id\" :options=\"options\" @click=\"remove($event,index)\" >\r\n\t\t\t\t\t<view class=\"item row\">\r\n\t\t\t\t\t\t<text class=\"mix-icon icon-xuanzhong\" :class=\"{active: item.checked}\" @click.stop.prevent=\"checkRow(item)\"></text>\r\n\t\t\t\t\t\t<view class=\"image-wrapper lazyload lazypic\" :class=\"{loaded: item.loaded}\" @click=\"navTo('/pages/product/detail?id='+item.product_id)\">\r\n\t\t\t\t\t\t\t<image :src=\"item.image\" mode=\"aspectFill\" lazy-load=\"true\" @load=\"imageOnLoad(item)\" ></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"right column\">\r\n\t\t\t\t\t\t\t<text class=\"title clamp\">{{item.title}}</text>\r\n\t\t\t\t\t\t\t<text class=\"sku\">{{item.sku.name}}</text>\r\n\t\t\t\t\t\t\t<text class=\"price\">¥{{item.price || ''}}</text>\r\n\t\t\t\t\t\t\t<view class=\"number-box\" @click.stop.prevent=\"stopPrevent\">\r\n\t\t\t\t\t\t\t\t<mix-number-box :min=\"1\" :max=\"item.stock\" :value=\"item.number\" :isMax=\"item.number >= item.stock\" :isMin=\"item.number === 1\" :index=\"index\" @eventChange=\"onNumberChange\" ></mix-number-box>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</uni-swipe-action-item>\r\n\t\t\t</uni-swipe-action>\r\n\t\t\t<!-- 失效商品 -->\r\n\t\t\t<view v-if=\"invalidList.length > 0\" class=\"invalid\">\r\n\t\t\t\t<view class=\"invalid-header row\" style=\" height: 72rpx; padding: 0 24rpx 0 22rpx; font-size: 24rpx; color: #333; background-color: #f5f5f5; \">\r\n\t\t\t\t\t<text class=\"mix-icon icon-tishi\"></text>\r\n\t\t\t\t\t<text class=\"fill\">商品调整、库存不足等原因会导致商品失效</text>\r\n\t\t\t\t\t<view class=\"btn center\" @click=\"clearInvalid\">\r\n\t\t\t\t\t\t<text class=\"mix-icon icon-lajitong\"></text>\r\n\t\t\t\t\t\t<text>清除</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-for=\"(item, index) in invalidList\" :key=\"item._id\" class=\"item row\">\r\n\t\t\t\t\t<text class=\"mix-icon icon-xuanzhong\"></text>\r\n\t\t\t\t\t<view class=\"image-wrapper lazyload lazypic\" :class=\"{loaded: item.loaded}\">\r\n\t\t\t\t\t\t<image :src=\"item.image\" mode=\"aspectFill\" lazy-load=\"true\" @load=\"imageOnLoad(item)\" ></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"right column\">\r\n\t\t\t\t\t\t<text class=\"title clamp\">{{item.title}}</text>\r\n\t\t\t\t\t\t<text class=\"sku\">{{item.sku.name}}</text>\r\n\t\t\t\t\t\t<view class=\"row\">\r\n\t\t\t\t\t\t\t<text class=\"price fill\">¥{{item.price || ''}}</text>\r\n\t\t\t\t\t\t\t<view class=\"tag\">失效</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 底部栏 -->\r\n\t\t\t<view class=\"bot-fill-view\"></view>\r\n\t\t</mescroll-body>\r\n\t\t\r\n\t\t<view v-if=\"loaded && (list.length > 0 || invalidList.length > 0)\" class=\"bottom row\">\r\n\t\t\t<text class=\"mix-icon icon-xuanzhong\" :class=\"{active: allChecked}\" @click=\"checkAll\"></text>\r\n\t\t\t<text v-if=\"!allChecked\" class=\"check-tip\">全选</text>\r\n\t\t\t<view class=\"del-btn center\" :class=\"{active: allChecked}\" @click=\"showPopup('mixModal')\">\r\n\t\t\t\t<text>清空</text>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"price fill\">￥{{ totalPrice | price(2) }}</text>\r\n\t\t\t<view class=\"btn center\" @click=\"createOrder\">\r\n\t\t\t\t<text>去结算{{ confirmNumber > 0 ? '(' + confirmNumber + ')' : '' }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 缺省 -->\r\n\t\t<mix-empty v-else-if=\"loaded\" type=\"cart\"></mix-empty>\r\n\t\t<!-- 加载 -->\r\n\t\t<mix-loading v-if=\"isLoading\" :type=\"loaded ? 1 : 2\" :mask=\"true\"></mix-loading>\r\n\t\t<!-- 确认对话框 -->\r\n\t\t<mix-modal ref=\"mixModal\" title=\"删除提示\" text=\"挑了这么久，真的要狠心清空吗\" confirmText=\"清空\" @onConfirm=\"clear\"></mix-modal>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport tabbarMixin from './mixin/tabbar' \r\n\timport MescrollMixin from \"@/components/mescroll-uni/mescroll-mixins.js\";\r\n\texport default {\r\n\t\tmixins: [tabbarMixin, MescrollMixin], \r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\toptions: [{\r\n\t\t\t\t\ttext: '删除',\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: '#ff536f'\r\n\t\t\t\t\t}\r\n\t\t\t\t}],\r\n\t\t\t\tupOption:{\r\n\t\t\t\t\tauto: false, // 是否自动加载\r\n\t\t\t\t\tpage: {\r\n\t\t\t\t\t \tnum: 0, // 当前页码,默认0,回调之前会加1,即callback(page)会从1开始\r\n\t\t\t\t\t \tsize: 15 // 每页数据的数量\r\n\t\t\t\t\t},\r\n\t\t\t\t\tempty: {\r\n\t\t\t\t\t\tonShow: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnoMoreSize: 50,\r\n\t\t\t\t},\r\n\t\t\t\tlist: [],\r\n\t\t\t\tinvalidList: [],\r\n\t\t\t\ttotalPrice: 0,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tallChecked(){\r\n\t\t\t\treturn this.list.length > 0 && this.list.every(item=> item.checked);\r\n\t\t\t},\r\n\t\t\tconfirmNumber(){\r\n\t\t\t\treturn this.list.filter(item=> item.checked).length;\r\n\t\t\t},\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tlist(){\r\n\t\t\t\tthis.calcTotalPrice();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tuni.$on('refreshCart', ()=>{\r\n\t\t\t\tthis.list = [];\r\n\t\t\t\tthis.invalidList = [];\r\n\t\t\t\tthis.mescroll.resetUpScroll(false)\r\n\t\t\t})\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.mescroll && this.mescroll.resetUpScroll(false)\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync loadList(type){\r\n\t\t\t\tconst res = await this.$request('cart', 'get');\r\n\t\t\t\tconst list = res.map(item=> {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tloaded: this.loaded,\r\n\t\t\t\t\t\t...item\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.list = list.filter(item=> item.invalid === false);\r\n\t\t\t\tthis.invalidList = list.filter(item=> item.invalid);\r\n\t\t\t\t\r\n\t\t\t\tthis.mescroll.endSuccess(list.length); //结束加载状态\r\n\t\t\t},\r\n\t\t\tmescrollInit(mescroll){\r\n\t\t\t\tthis.isLoading = true;\r\n\t\t\t\tthis.mescroll = mescroll;\r\n\t\t\t\tthis.mescroll.resetUpScroll(false)\r\n\t\t\t},\r\n\t\t\t//去结算 创建订单\r\n\t\t\tcreateOrder(){\r\n\t\t\t\tconst ids = this.list.filter(item=> item.checked).map(item=> item._id);\r\n\t\t\t\tif(ids.length === 0){\r\n\t\t\t\t\tthis.$util.msg('请选择结算商品');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.navTo('/pages/order/createOrder?type=cart&ids='+ids);\r\n\t\t\t},\r\n\t\t\t//数量修改\r\n\t\t\tonNumberChange(e){\r\n\t\t\t\tthis.$util.debounce(async ()=>{\r\n\t\t\t\t\tconst res = await this.$request('cart', 'updateNumber', {\r\n\t\t\t\t\t\tid: this.list[e.index]._id,\r\n\t\t\t\t\t\tnumber: e.number\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(res.status == 1){\r\n\t\t\t\t\t\tthis.list[e.index].number = e.number\r\n\t\t\t\t\t\tthis.calcTotalPrice();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$util.msg('数量更新失败');\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 500)\r\n\t\t\t},\r\n\t\t\t//单选\r\n\t\t\tcheckRow(item){\r\n\t\t\t\tif(this.chenageChecked([item._id], !item.checked)){\r\n\t\t\t\t\titem.checked = !item.checked;\r\n\t\t\t\t\tthis.calcTotalPrice();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//全选\r\n\t\t\tcheckAll(){\r\n\t\t\t\tconst ids = this.list.map(item=> item._id);\r\n\t\t\t\tconst allChecked = !this.allChecked;\r\n\t\t\t\tif(this.chenageChecked(ids, allChecked)){\r\n\t\t\t\t\tthis.list.forEach(item=> {\r\n\t\t\t\t\t\titem.checked = allChecked;\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.calcTotalPrice();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//修改选中状态\r\n\t\t\tasync chenageChecked(ids, checked){\r\n\t\t\t\tthis.$request('cart', 'updateCheck', {\r\n\t\t\t\t\tids, \r\n\t\t\t\t\tchecked\r\n\t\t\t\t}, {showLoading: true}).then(res=>{\r\n\t\t\t\t\tif(res.status === 1){\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$util.msg('修改失败');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//删除\r\n\t\t\tremove(e, index){\r\n\t\t\t\tthis.$util.throttle(async ()=>{\r\n\t\t\t\t\tconst res = await this.$request('cart', 'remove', {\r\n\t\t\t\t\t\tids: [this.list[index]._id]\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tshowLoading: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$util.msg(res.msg);\r\n\t\t\t\t\tif(res.status === 1){\r\n\t\t\t\t\t\tthis.list.splice(index, 1);\r\n\t\t\t\t\t\tthis.$store.dispatch('getCartCount');//更新数量\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//清空失效\r\n\t\t\tclearInvalid(){\r\n\t\t\t\tthis.$util.throttle(async ()=>{\r\n\t\t\t\t\tconst res = await this.$request('cart', 'remove', {\r\n\t\t\t\t\t\tids: this.invalidList.map(item=> item._id)\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tshowLoading: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$util.msg(res.msg);\r\n\t\t\t\t\tif(res.status === 1){\r\n\t\t\t\t\t\tthis.invalidList = [];\r\n\t\t\t\t\t\tthis.$store.dispatch('getCartCount');//更新数量\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//清空商品\r\n\t\t\tclear(){\r\n\t\t\t\tthis.$util.throttle(async ()=>{\r\n\t\t\t\t\tconst res = await this.$request('cart', 'removeAll', {}, {\r\n\t\t\t\t\t\tshowLoading: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$util.msg(res.msg);\r\n\t\t\t\t\tif(res.status === 1){\r\n\t\t\t\t\t\tthis.list = [];\r\n\t\t\t\t\t\tthis.$store.dispatch('getCartCount');//更新数量\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//计算总价\r\n\t\t\tcalcTotalPrice(){\r\n\t\t\t\tconst checkedList = this.list.filter(item=> item.checked);\r\n\t\t\t\tlet total = 0;\r\n\t\t\t\tcheckedList.forEach(item=> {\r\n\t\t\t\t\tconsole.log(item);\r\n\t\t\t\t\ttotal += item.price * item.number\r\n\t\t\t\t})\r\n\t\t\t\tthis.totalPrice = total;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.app{\r\n\t\t\r\n\t\t/deep/ .uni-swipe{\r\n\t\t\tpadding: 24rpx 0;\r\n\t\t}\r\n\t}\r\n\t.item{\r\n\t\twidth: 100%;\r\n\t\tpadding-right: 30rpx;\r\n\t\toverflow: hidden;\r\n\t\t\r\n\t\t.icon-xuanzhong{\r\n\t\t\tpadding: 60rpx 20rpx;\r\n\t\t\tfont-size: 36rpx;\r\n\t\t\tcolor: #ddd;\r\n\t\t\t\r\n\t\t\t&.active{\r\n\t\t\t\tcolor: $base-color;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.image-wrapper{\r\n\t\t\tflex-shrink: 0;\r\n\t\t\twidth: 170rpx;\r\n\t\t\theight: 170rpx;\r\n\t\t\tmargin-right: 20rpx;\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t\toverflow: hidden;\r\n\t\t\t\r\n\t\t\timage{\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.right{\r\n\t\t\tflex: 1;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\t\t.title{\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tline-height: 42rpx;\r\n\t\t}\r\n\t\t.sku{\r\n\t\t\tmin-height: 20rpx;\r\n\t\t\tmargin: 20rpx 0 28rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #999;\r\n\t\t}\r\n\t\t.price{\r\n\t\t\tmargin-bottom: 4rpx;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t\t.number-box{\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tpadding: 20rpx 30rpx 0;\r\n\t\t}\r\n\t\t/deep/{\r\n\t\t\t.uni-numbox-minus, .uni-numbox-value, .uni-numbox-plus{\r\n\t\t\t\theight: 48rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.invalid{\r\n\t\t\r\n\t\t.item{\r\n\t\t\tpadding: 24rpx 24rpx 24rpx 0;\r\n\t\t\topacity: 0.5;\r\n\t\t}\r\n\t\t.invalid-header{\r\n\t\t\theight: 72rpx;\r\n\t\t\tpadding: 0 24rpx 0 22rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #333;\r\n\t\t\tbackground-color: #f5f5f5;\r\n\t\t}\r\n\t\t.icon-tishi{\r\n\t\t\tmargin-right: 10rpx;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tcolor: $base-color;\r\n\t\t}\r\n\t\t.btn{\r\n\t\t\tpadding: 8rpx 16rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #666;\r\n\t\t}\r\n\t\t.icon-lajitong{\r\n\t\t\tmargin-right: 8rpx;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t}\r\n\t\t.tag{\r\n\t\t\tpadding: 6rpx 18rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #fff;\r\n\t\t\tborder-radius: 100rpx;\r\n\t\t\tbackground-color: #555;\r\n\t\t}\r\n\t}\r\n\t.bot-fill-view{\r\n\t\twidth: 100%;\r\n\t\theight: 110rpx;\r\n\t\tbox-sizing: content-box;\r\n\t\tpadding-bottom: constant(safe-area-inset-bottom);\r\n\t\tpadding-bottom: env(safe-area-inset-bottom); \r\n\t}\r\n\t.bottom{\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tbottom: var(--window-bottom);\r\n\t\tz-index: 90;\r\n\t\twidth: 100%;\r\n\t\theight: 100rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tbox-shadow: 0 -2rpx 10rpx 0 rgba(0,0,0,.06);\r\n\t\tbox-sizing: content-box;\r\n\t\tpadding-bottom: constant(safe-area-inset-bottom);\r\n\t\tpadding-bottom: env(safe-area-inset-bottom); \r\n\t\t\r\n\t\t.icon-xuanzhong{\r\n\t\t\tmargin-left: 20rpx;\r\n\t\t\tfont-size: 48rpx;\r\n\t\t\tcolor: #ddd;\r\n\t\t\tposition: relative;\r\n\t\t\tz-index: 10;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-radius: 100rpx;\r\n\t\t\t\r\n\t\t\t&.active{\r\n\t\t\t\tcolor: $base-color;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.check-tip{\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 80rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t\t.del-btn{\r\n\t\t\twidth: 0rpx;\r\n\t\t\theight: 44rpx;\r\n\t\t\tpadding-left: 14rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #fff;\r\n\t\t\tbackground-color: #C0C4CC;\r\n\t\t\tborder-radius: 0 100rpx 100rpx 0;\r\n\t\t\tposition: relative;\r\n\t\t\tleft: -24rpx;\r\n\t\t\ttransition: width .2s;\r\n\t\t\t\r\n\t\t\t&.active{\r\n\t\t\t\twidth: 110rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.price{\r\n\t\t\tmargin-right: 30rpx;\r\n\t\t\tfont-size: 34rpx;\r\n\t\t\tcolor: $base-color;\r\n\t\t\tfont-weight: 700;\r\n\t\t\ttext-align: right;\r\n\t\t}\r\n\t\t.btn{\r\n\t\t\tmin-width: 180rpx;\r\n\t\t\theight: 70rpx;\r\n\t\t\tpadding: 0 26rpx;\r\n\t\t\tmargin-right: 20rpx;\r\n\t\t\tborder-radius: 100rpx;\r\n\t\t\tbackground-color: $base-color;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&id=3c3dbdc8&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&id=3c3dbdc8&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1612401279516\n      var cssReload = require(\"E:/development/HBuilderX.2.8.8/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}