{"version":3,"sources":["uni-app:///main.js","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/product/detail.vue?94e7","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/product/detail.vue?fd47","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/product/detail.vue?c4ee","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/product/detail.vue?48f3","uni-app:///pages/product/detail.vue","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/product/detail.vue?fd99","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/product/detail.vue?ace4","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/product/detail.vue?5967","webpack:///E:/development/HBuilderX.2.8.8/HBuilderX/readme/shopping/pages/product/detail.vue?1d09"],"names":["createPage","Page"],"mappings":"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","file":"pages/product/detail.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/product/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=0e9671aa&scoped=true&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./detail.vue?vue&type=style&index=1&id=0e9671aa&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e9671aa\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/product/detail.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=template&id=0e9671aa&scoped=true&\"","var components = {\n  mixPriceView: function() {\n    return import(\n      /* webpackChunkName: \"components/mix-price-view/mix-price-view\" */ \"@/components/mix-price-view/mix-price-view.vue\"\n    )\n  },\n  jyfParser: function() {\n    return import(\n      /* webpackChunkName: \"components/jyf-parser/jyf-parser\" */ \"@/components/jyf-parser/jyf-parser.vue\"\n    )\n  },\n  mixLoading: function() {\n    return import(\n      /* webpackChunkName: \"components/mix-loading/mix-loading\" */ \"@/components/mix-loading/mix-loading.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"app\">\r\n\t\t<pageHeader ref=\"pageHeader\"></pageHeader>\r\n\t\t<!-- 轮播图 -->\r\n\t\t<mix-swiper :list=\"data.images\"></mix-swiper>\r\n\t\t<view class=\"introduce column\">\r\n\t\t\t<text class=\"title\">{{ data.title }}</text>\r\n\t\t\t<view class=\"price-wrap row\">\r\n\t\t\t\t<mix-price-view :price=\"data.price\" :size=\"40\"></mix-price-view>\r\n\t\t\t\t<text v-if=\"data.market_price > data.price\" class=\"m-price\">￥{{ data.market_price }}</text>\r\n\t\t\t\t<text v-if=\"loaded && !data.freight_template\" class=\"tag\">免邮费</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bot row\">\r\n\t\t\t\t<text class=\"fill\">销量: {{ data.sales || 0 }}</text>\r\n\t\t\t\t<text class=\"fill\">库存: {{ data.stock || 0 }}</text>\r\n\t\t\t\t<text class=\"fill\">浏览量: {{ data.look_num || 0 }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!--  分享 -->\r\n\t\t<view class=\"share-wrap row\">\r\n\t\t\t<view class=\"icon row\">\r\n\t\t\t\t<text class=\"mix-icon icon-iconfontxingxing\"></text>\r\n\t\t\t\t<text>分享</text>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"tit\">发给好友看看吧~</text>\r\n\t\t\t<text class=\"mix-icon icon-bangzhu1\"></text>\r\n\t\t\t\r\n\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t<button type=\"primary\" open-type=\"share\">\r\n\t\t\t\t<view class=\"btn\">\r\n\t\t\t\t\t立即分享\r\n\t\t\t\t\t<text class=\"mix-icon icon-you\"></text>\r\n\t\t\t\t</view>\r\n\t\t\t</button>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t\t<view class=\"btn\" @click=\"doAppShare\">\r\n\t\t\t\t立即分享\r\n\t\t\t\t<text class=\"mix-icon icon-you\"></text>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t</view>\r\n\t\t<view class=\"c-list\">\r\n\t\t\t<view v-if=\"data.skuData\" class=\"row b-b\" @click=\"showPopup('skuPopup')\">\r\n\t\t\t\t<text class=\"tit\">购买类型</text>\r\n\t\t\t\t<view class=\"con\">\r\n\t\t\t\t\t<text class=\"attr\">{{ currentSku.name || '' }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"mix-icon icon-you\"></text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"row b-b\" @click=\"navTo('/pages/coupon/receiveCoupon', {login: true})\">\r\n\t\t\t\t<text class=\"tit\">优惠券</text>\r\n\t\t\t\t<text class=\"con red\">领取优惠券</text>\r\n\t\t\t\t<text class=\"mix-icon icon-you\"></text>\r\n\t\t\t</view>\r\n\t\t\t<!-- <view class=\"row b-b\">\r\n\t\t\t\t<text class=\"tit\">促销活动</text>\r\n\t\t\t\t<view class=\"con-list fill column\">\r\n\t\t\t\t\t<text>新人首单送20元无门槛代金券</text>\r\n\t\t\t\t\t<text>订单满50减10</text>\r\n\t\t\t\t\t<text>订单满100减30</text>\r\n\t\t\t\t\t<text>单笔购买满两件免邮费</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view> -->\r\n\t\t\t<view class=\"row b-b\">\r\n\t\t\t\t<text class=\"tit\">服务</text>\r\n\t\t\t\t<view class=\"con\">\r\n\t\t\t\t\t<text class=\"service\">7天无理由退换货 ·</text>\r\n\t\t\t\t\t<text class=\"service\">假一赔十 ·</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 评价 -->\r\n\t\t<view id=\"rating\" class=\"rating-wrap column\" :class=\"{'no-data': !ratingData.data}\">\r\n\t\t\t<view class=\"e-header\" @click=\"navTo('/pages/rating/rating?id='+data._id)\">\r\n\t\t\t\t<text class=\"tit\">商品评价</text>\r\n\t\t\t\t<text>({{ ratingData.count || 0 }})</text>\r\n\t\t\t\t<text class=\"tip\">好评率 {{ data.rating_ratio || 100 }}%</text>\r\n\t\t\t\t<text class=\"mix-icon icon-you\"></text>\r\n\t\t\t</view> \r\n\t\t\t<rating-item v-if=\"ratingData.data\" :item=\"ratingData.data\"></rating-item>\r\n\t\t</view>\r\n\t\t<view class=\"detail-desc\">\r\n\t\t\t<view class=\"d-header center\">\r\n\t\t\t\t<text>图文详情</text>\r\n\t\t\t</view>\r\n\t\t\t<jyf-parser\r\n\t\t\t\tref=\"article\"\r\n\t\t\t\t:html=\"data.content\" \r\n\t\t\t\tlazy-load \r\n\t\t\t\tshow-with-animation \r\n\t\t\t></jyf-parser>\r\n\t\t\t<!-- <rich-text :nodes=\"data.content\"></rich-text> -->\r\n\t\t</view>\r\n\t\t<!-- 底部操作菜单 -->\r\n\t\t<bottom-operation :infoData=\"data\" @onOprationClick=\"onOprationClick\"></bottom-operation>\r\n\t\t<!-- 规格面板 -->\r\n\t\t<sku v-if=\"data._id\" ref=\"skuPopup\" :infoData=\"data\" @setSku=\"setCurrentSku\" @addToCart=\"addToCart\" @buyNow=\"buyNow\"></sku>\r\n\t\t<!-- loading -->\r\n\t\t<mix-loading v-if=\"isLoading\" :mask=\"true\"></mix-loading>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport jyfParser from '@/components/jyf-parser/jyf-parser.vue'\r\n\timport pageHeader from './components/detail-page-header'//页面头\r\n\timport mixSwiper from './components/mix-swiper'//轮播图\r\n\timport ratingItem from '@/pages/rating/components/rating-item'//评价\r\n\timport bottomOperation from './components/bottom-operation'//底部栏\r\n\timport sku from './components/sku'//sku面板\r\n\tlet _anchorList = [];\r\n\texport default{\r\n\t\tcomponents: {\r\n\t\t\tjyfParser,\r\n\t\t\tpageHeader,\r\n\t\t\tmixSwiper,\r\n\t\t\tratingItem,\r\n\t\t\tbottomOperation,\r\n\t\t\tsku\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcurrentSku: {},\r\n\t\t\t\tdata: {\r\n\t\t\t\t\timages: [],\r\n\t\t\t\t},\r\n\t\t\t\tratingData: {}, //评价\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad(options){\r\n\t\t\tthis.id = options.id;\r\n\t\t\tthis.loadRating(); //加载评价\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.loadData();\r\n\t\t},\r\n\t\tonPageScroll(e) {\r\n\t\t\tthis.$refs.pageHeader && this.$refs.pageHeader.pageScroll(e);\r\n\t\t},\r\n\t\t// #ifdef MP-WEIXIN\r\n\t\tonShareAppMessage(res) {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: this.data.title,\r\n\t\t\t\tpath: '/pages/product/detail?id='+this.data._id,\r\n\t\t\t\timageUrl: this.data.thumb\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #endif\r\n\t\tmethods:{\r\n\t\t\tasync loadData(){\r\n\t\t\t\tconst res = await this.$request('product', 'getDetail', {\r\n\t\t\t\t\tid: this.id\r\n\t\t\t\t})\r\n\t\t\t\tif(res.status === 0){\r\n\t\t\t\t\tthis.$util.msg(res.msg || '产品不存在或已下架');\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tuni.navigateBack();\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst data = res.data;\r\n\t\t\t\tdata.content = data.content.replace(/img src=\"/g, 'img style=\"display:block;width:100%;height:auto\" src=\"');\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\tthis.calcAnchor();//计算锚点参数\r\n\t\t\t\t})\r\n\t\t\t\t//添加浏览历史\r\n\t\t\t\tthis.addProductHistory();\r\n\t\t\t},\r\n\t\t\t//加载评价\r\n\t\t\tasync loadRating(){\r\n\t\t\t\tconst res = await this.$request('rating', 'getDetailRating', {\r\n\t\t\t\t\tproduct_id: this.id,\r\n\t\t\t\t})\r\n\t\t\t\tthis.ratingData = res;\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\tthis.calcAnchor();//计算锚点参数\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//加入购物车\r\n\t\t\taddToCart(){\r\n\t\t\t\tthis.$util.throttle(async ()=>{\r\n\t\t\t\t\tconst data = this.getConfirmData();\r\n\t\t\t\t\tif(!data){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst res = await this.$request('cart', 'add', data, {\r\n\t\t\t\t\t\tshowLoading: true,\r\n\t\t\t\t\t\tlogin: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(!res){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.log(res)\r\n\t\t\t\t\tthis.$util.msg(res.msg);\r\n\t\t\t\t\tif(res.status === 1){\r\n\t\t\t\t\t\tthis.hidePopup('skuPopup');\r\n\t\t\t\t\t\tthis.$store.dispatch('getCartCount');//更新购物车数量\r\n\t\t\t\t\t\tuni.$emit('refreshCart');//更新购物车\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//立即购买\r\n\t\t\tbuyNow(){\r\n\t\t\t\tconst data = this.getConfirmData();\r\n\t\t\t\tif(!data){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.hidePopup('skuPopup');\r\n\t\t\t\tthis.navTo('/pages/order/createOrder?data='+JSON.stringify(data), {\r\n\t\t\t\t\tlogin: true\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//设置当前选择sku\r\n\t\t\tsetCurrentSku(data){\r\n\t\t\t\tthis.currentSku = data;\r\n\t\t\t},\r\n\t\t\t//获取当前sku 如果没有sku返回默认规格\r\n\t\t\tgetConfirmData(){\r\n\t\t\t\tconst sku = this.currentSku._id ? this.currentSku: this.data.sku[0];\r\n\t\t\t\tif(sku.stock <= 0 || this.data.stock <= 0){\r\n\t\t\t\t\tthis.$util.msg('库存不足');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tproduct_id: this.data._id,\r\n\t\t\t\t\tnumber: this.$refs.skuPopup.buyNumber || 1,\r\n\t\t\t\t\tsku: this.currentSku._id ? this.currentSku: this.data.sku[0]\r\n\t\t\t\t}\r\n\t\t\t\treturn data;\r\n\t\t\t},\r\n\t\t\t//计算锚点参数\r\n\t\t\tasync calcAnchor(){\r\n\t\t\t\tconst size = await new Promise(res => {\r\n\t\t\t\t\tuni.createSelectorQuery().select('#rating').boundingClientRect(data => {\r\n\t\t\t\t\t\tres(data);\r\n\t\t\t\t\t}).exec();\r\n\t\t\t\t});\r\n\t\t\t\tconst headerHeight = this.systemInfo.statusBarHeight + this.systemInfo.navigationBarHeight;\r\n\t\t\t\tconst a1 = (size ? size.top : 0) - headerHeight;\r\n\t\t\t\tconst a2 = (size ? size.bottom : 0) + uni.upx2px(12) - headerHeight;\r\n\t\t\t\tthis.$refs.pageHeader.anchorList[1].top = a1;\r\n\t\t\t\tthis.$refs.pageHeader.anchorList[2].top = a2;\r\n\t\t\t\t_anchorList = [0, a1, a2];\r\n\t\t\t},\r\n\t\t\t//添加浏览历史\r\n\t\t\taddProductHistory(){\r\n\t\t\t\tconst data = this.data;\r\n\t\t\t\tlet list = uni.getStorageSync('productHistory');\r\n\t\t\t\tif(!list){\r\n\t\t\t\t\tlist = [];\r\n\t\t\t\t}\r\n\t\t\t\tconst index = list.findIndex(item=> item.id === data._id);\r\n\t\t\t\tif(index !== -1){\r\n\t\t\t\t\tlist.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t\tlist.unshift({\r\n\t\t\t\t\tid: data._id,\r\n\t\t\t\t\tthumb: data.thumb\r\n\t\t\t\t})\r\n\t\t\t\tuni.setStorageSync('productHistory', list);\r\n\t\t\t},\r\n\t\t\t//删除当前浏览历史\r\n\t\t\tdelHistory(){\r\n\t\t\t\tlet list = uni.getStorageSync('productHistory');\r\n\t\t\t\tif(!list){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst index = list.findIndex(item=> item._id === data._id);\r\n\t\t\t\tif(index === -1){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlist.splice(index, 1);\r\n\t\t\t\tuni.setStorageSync('productHistory', list);\r\n\t\t\t},\r\n\t\t\tshowPopup(key, type){\r\n\t\t\t\tthis.$refs[key].open(type);\r\n\t\t\t},\r\n\t\t\tonOprationClick(type){\r\n\t\t\t\tthis.showPopup('skuPopup', type);\r\n\t\t\t},\r\n\t\t\tdoAppShare(){\r\n\t\t\t\tthis.$util.throttle(async ()=>{\r\n\t\t\t\t\tconst data = {\r\n\t\t\t\t\t    provider: \"weixin\",\r\n\t\t\t\t\t    scene: 'WXSceneSession',\r\n\t\t\t\t\t    type: 5,\r\n\t\t\t\t\t\timageUrl: this.data.thumb,\r\n\t\t\t\t\t\ttitle: this.data.title,\r\n\t\t\t\t\t\tminiProgram: {\r\n\t\t\t\t\t\t\tid: 'gh_3dada2e0f833',\r\n\t\t\t\t\t\t\tpath: '/pages/product/detail?id='+this.data._id,\r\n\t\t\t\t\t\t\ttype: 0,\r\n\t\t\t\t\t\t\twebUrl: 'http://guoyunnet.com'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t    success: res=> {\r\n\t\t\t\t\t        console.log(\"success:\" + JSON.stringify(res));\r\n\t\t\t\t\t    },\r\n\t\t\t\t\t    fail: err=> {\r\n\t\t\t\t\t        console.log(\"fail:\" + JSON.stringify(err));\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.share(data);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\tpage{\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n</style>\r\n<style scoped lang='scss'>\r\n\t.app{\r\n\t\tpadding-bottom: constant(safe-area-inset-bottom);\r\n\t\tpadding-bottom: env(safe-area-inset-bottom); \r\n\t\t\r\n\t\t&:after{\r\n\t\t\tcontent: '';\r\n\t\t\tdisplay: block;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100rpx;\r\n\t\t}\r\n\t}\r\n\t/* 标题简介 */\r\n\t.introduce{\r\n\t\tbackground: #fff;\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\t\r\n\t\t.title{\r\n\t\t\tmin-height: 44rpx;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tcolor: #333;\r\n\t\t\tline-height: 44rpx;\r\n\t\t\tfont-weight: 700;\r\n\t\t}\r\n\t\t.price-wrap{\r\n\t\t\tmin-height: 40rpx;\r\n\t\t\tmargin-top: 28rpx;\r\n\t\t\tfont-size: 26rpx;\r\n\t\t}\r\n\t\t.m-price{\r\n\t\t\tmargin-left: 10rpx;\r\n\t\t\tmargin-right: 16rpx;\r\n\t\t\tcolor: #999;\r\n\t\t\ttext-decoration: line-through;\r\n\t\t}\r\n\t\t.tag{\r\n\t\t\ttransform: translateY(4rpx);\r\n\t\t\tpadding: 0 10rpx;\r\n\t\t\tmargin-left: 8rpx;\r\n\t\t\tbackground: $base-color;\r\n\t\t\tfont-size: 20rpx;\r\n\t\t\tcolor: #fff;\r\n\t\t\tline-height: 32rpx;\r\n\t\t\tborder-radius: 4rpx;\r\n\t\t\tposition: relative;\r\n\t\t\tbottom: 8rpx;\r\n\t\t}\r\n\t\t.bot{\r\n\t\t\tpadding: 28rpx 0 10rpx 4rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #999;\r\n\t\t}\r\n\t}\r\n\t/* 分享 */\r\n\t.share-wrap{\r\n\t\tbackground: linear-gradient(to right, #fdf5f6, #fbebf6);\r\n\t\theight: 76rpx;\r\n\t\tpadding: 0 30rpx;\r\n\t\tcolor: $base-color;\r\n\t\t\r\n\t\t.icon{\r\n\t\t\twidth: 90rpx;\r\n\t\t\theight: 30rpx;\r\n\t\t\tborder: 1px solid $base-color;\r\n\t\t\tborder-radius: 4rpx;\r\n\t\t\tposition: relative;\r\n\t\t\toverflow: hidden;\r\n\t\t\tfont-size: 22rpx;\r\n\t\t\t\r\n\t\t\t&:after{\r\n\t\t\t\tposition:absolute;\r\n\t\t\t\tleft: -20rpx;\r\n\t\t\t\ttop: -12rpx;\r\n\t\t\t\tcontent: '';\r\n\t\t\t\twidth: 50rpx;\r\n\t\t\t\theight: 50rpx;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tbackground-color: $base-color;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.icon-iconfontxingxing{\r\n\t\t\tposition:relative;\r\n\t\t\tz-index: 1;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tmargin-left: 2rpx;\r\n\t\t\tmargin-right: 10rpx;\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\t\t.tit{\r\n\t\t\tflex: 1;\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tcolor: #666;\r\n\t\t\tmargin-left:14rpx;\r\n\t\t}\r\n\t\t.icon-bangzhu1{\r\n\t\t\tpadding: 10rpx;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t\t.btn{\r\n\t\t\tpadding-left: 20rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: $base-color;\r\n\t\t}\r\n\t\t.icon-you{\r\n\t\t\tfont-size: 22rpx;\r\n\t\t\tmargin-left: 4rpx;\r\n\t\t\tcolor: $base-color;\r\n\t\t}\r\n\t}\r\n\t.c-list{\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #888;\r\n\t\tbackground: #fff;\r\n\t\t\r\n\t\t.row{\r\n\t\t\tmin-height: 82rpx;\r\n\t\t\tpadding: 16rpx 30rpx;\r\n\t\t\tposition:relative;\r\n\t\t\t\r\n\t\t\t&:after{\r\n\t\t\t\tborder-color: #eaeaea;\r\n\t\t\t}\r\n\t\t\t&:last-child:after{\r\n\t\t\t\tborder: 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.tit{\r\n\t\t\twidth: 140rpx;\r\n\t\t}\r\n\t\t.con{\r\n\t\t\tflex: 1;\r\n\t\t\tcolor: #333;\r\n\t\t\t\r\n\t\t\t.attr{\r\n\t\t\t\tmargin-right: 10rpx;\r\n\t\t\t}\r\n\t\t\t.service{\r\n\t\t\t\tmargin-right: 30rpx;\r\n\t\t\t\t\r\n\t\t\t\t&:last-child{\r\n\t\t\t\t\tmargin: 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.con-list{\r\n\t\t\tcolor: #333;\r\n\t\t\t\r\n\t\t\ttext{\r\n\t\t\t\tline-height: 40rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.red{\r\n\t\t\tcolor: $base-color;\r\n\t\t}\r\n\t\t.icon-you{\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #999;\r\n\t\t}\r\n\t}\r\n\t/* 评价 */\r\n\t.rating-wrap{\r\n\t\tpadding: 20rpx 30rpx 0rpx;\r\n\t\tbackground: #fff;\r\n\t\tmargin-top: 12rpx;\r\n\t\t\r\n\t\t&.no-data{\r\n\t\t\tpadding: 10rpx 30rpx 10rpx;\r\n\t\t}\r\n\t\t.e-header{\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\theight: 70rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t\t.tit{\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tcolor: #333;\r\n\t\t\tfont-weight: 700;\r\n\t\t\tmargin-right: 4rpx;\r\n\t\t}\r\n\t\t.tip{\r\n\t\t\tflex: 1;\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tcolor: #999;\r\n\t\t\ttext-align: right;\r\n\t\t}\r\n\t\t.icon-you{\r\n\t\t\tmargin-left: 8rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #999;\r\n\t\t}\r\n\t\t.mix-rating-item::after{\r\n\t\t\tborder: 0;\r\n\t\t}\r\n\t}\r\n\t/*  详情 */\r\n\t.detail-desc{\r\n\t\tmargin-top: 12rpx;\r\n\t\tbackground: #fff;\r\n\t\t\r\n\t\t.d-header{\r\n\t\t\theight: 80rpx;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tcolor: #333;\r\n\t\t\t\t\r\n\t\t\ttext{\r\n\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t}\r\n\t\t\t&:before, &:after{\r\n\t\t\t\tcontent: '';\r\n\t\t\t\twidth: 60rpx;\r\n\t\t\t\tborder-bottom: 1px solid #ccc; \r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1612401276834\n      var cssReload = require(\"E:/development/HBuilderX.2.8.8/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=1&id=0e9671aa&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=1&id=0e9671aa&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1612401278052\n      var cssReload = require(\"E:/development/HBuilderX.2.8.8/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}